<?xml version="1.0" ?>
<layer-spec xmlns="urn:jboss:galleon:layer-spec:1.0"
            name="bw-calendar-pg">
    <dependencies>
        <layer name="bw-tzserver"/>
        <layer name="bw-rw"/>
        <layer name="postgresql.driver"/>
    </dependencies>

    <packages>
        <package name="config.calendar-pg"/>
        <package name="data.calendar-pg"/>
        <package name="deploy.calendar-rw"/>
        <package name="deploy.xml"/>
    </packages>

    <feature spec="subsystem.datasources">
        <feature spec="subsystem.datasources.data-source">
            <param name="data-source"           value="CalendarDS"/>
            <param name="use-ccm"               value="false"/>
            <param name="use-java-context"      value="true"/>
            <param name="jndi-name"             value="java:/CalendarDS"/>
            <param name="connection-url"        value="jdbc:postgresql://${com.bedework.db.ip}:5432/caldb"/>
            <param name="driver-name"           value="postgresql"/>
            <param name="user-name"             value="bw"/>
            <param name="password"              value="bw"/>
            <param name="jta"                   value="true"/>
            <param name="min-pool-size" value="1" />
            <param name="max-pool-size" value="50" />
            <param name="pool-prefill" value="true" />
            <param name="valid-connection-checker-class-name"
                   value="org.jboss.jca.adapters.jdbc.extensions.postgres.PostgreSQLValidConnectionChecker" />
            <param name="validate-on-match" value="true" />
            <param name="exception-sorter-class-name"
                   value="org.jboss.jca.adapters.jdbc.extensions.postgres.PostgreSQLExceptionSorter"/>
            <param name="idle-timeout-minutes" value="15" />
        </feature>
    </feature>
</layer-spec>