<?xml version="1.0" ?>
<layer-spec xmlns="urn:jboss:galleon:layer-spec:1.0"
            name="bw-calendar-rw">
    <!-- Common features (db independent) for calendar with updates to data -->

    <dependencies>
        <layer name="bw-common"/>
        <layer name="bw-tzserver"/>
        <!-- Can't do - see below
        <layer name="bw-calendar-ro"/> -->
    </dependencies>

    <packages>
        <!-- Can't load config here - it's db dependent -->
        <package name="deploy.calendar-xsl-caladminrsrc"/>

        <!-- I want to do this:
        <exclude name="deploy.war.calendar-ro"/>
        <package name="deploy.war.calendar-rw"/>
        -->

        <!-- so I do this -->
        <package name="deploy.calendar-xsl-calfeedrsrc.MainCampus"/>
        <package name="deploy.calendar-xsl-calrsrc.MainCampus"/>

        <package name="deploy.war.calendar-rw"/>
        <package name="deploy.xml"/>
    </packages>

    <!-- Logging config -->

    <feature spec="subsystem.logging.periodic-rotating-file-handler">
        <param name="periodic-rotating-file-handler" value="CHANGES"/>
        <param name="named-formatter" value="PATTERN"/>
        <param name="file" value="{relative-to=jboss.server.log.dir,path=bwchange.log}"/>
        <param name="suffix" value=".yyyy-MM-dd"/>
        <param name="append" value="true"/>
        <param name="autoflush" value="true"/>
    </feature>

    <feature spec="subsystem.logging.logger">
        <param name="logger" value="org.bedework.chgnote"/>
        <param name="level" value="INFO"/>
        <param name="use-parent-handlers" value="false"/>
        <param name="handlers" value="[CHANGES]"/>
    </feature>
</layer-spec>